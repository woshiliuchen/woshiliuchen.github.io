<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¬¢è¿å›å®¶</title>
    <!-- å¼•å…¥æ ·å¼åº“ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- é…ç½®æ¸©æš–é£æ ¼é¢œè‰² -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        warm: {
                            50: '#fffbf5',
                            100: '#fff4e6',
                            200: '#ffe8cc',
                            300: '#ffd8a8',
                            400: '#ffc078',
                            500: '#ffa94d',
                            600: '#fd7e14',
                            700: '#e67e22',
                            800: '#d35400',
                            900: '#c0392b'
                        }
                    },
                    fontFamily: {
                        rounded: ['"Comic Sans MS"', '"Marker Felt"', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <!-- è‡ªå®šä¹‰æ ·å¼ -->
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow-sm {
                text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            }
            .bg-blur {
                backdrop-filter: blur(10px);
            }
            .card-hover {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
        }
    </style>
    
    <style>
        body {
            transition: background-image 1.5s ease-in-out;
            min-height: 100vh;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="font-rounded">
    <!-- ä¸»å®¹å™¨ -->
    <div class="container mx-auto px-4 py-8 max-w-md">
        <!-- ä¸»å¡ç‰‡ -->
        <div class="bg-white/90 bg-blur rounded-3xl shadow-2xl p-6 md:p-8 mb-6 fade-in">
            <!-- é¡¶éƒ¨é—®å€™è¯­ -->
            <div id="greeting" class="text-center text-2xl md:text-3xl font-bold text-warm-700 mb-4 pulse"></div>
            
            <!-- æ—¥æœŸæ—¶é—´æ˜¾ç¤º -->
            <div class="text-center mb-6">
                <div id="date" class="text-lg text-gray-600"></div>
                <div id="time" class="text-xl text-warm-600 font-semibold"></div>
            </div>
            
            <!-- å‡ºé—¨/å›å®¶æ—¶é—´è®°å½• -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-warm-50 rounded-xl p-4 border border-warm-100 card-hover">
                    <h3 class="text-warm-600 font-bold mb-2 text-center flex items-center justify-center">
                        <i class="fa fa-sign-out mr-2"></i>å‡ºé—¨æ—¶é—´
                    </h3>
                    <div id="leave-time" class="text-center text-gray-700">æœªè®°å½•</div>
                    <button onclick="recordLeaveTime()" class="mt-2 w-full bg-warm-100 hover:bg-warm-200 text-warm-800 rounded-lg py-1 text-sm transition-colors">
                        è®°å½•å‡ºé—¨
                    </button>
                </div>
                
                <div class="bg-warm-50 rounded-xl p-4 border border-warm-100 card-hover">
                    <h3 class="text-warm-600 font-bold mb-2 text-center flex items-center justify-center">
                        <i class="fa fa-sign-in mr-2"></i>å›å®¶æ—¶é—´
                    </h3>
                    <div id="return-time" class="text-center text-gray-700">æœªè®°å½•</div>
                    <button onclick="recordReturnTime()" class="mt-2 w-full bg-warm-100 hover:bg-warm-200 text-warm-800 rounded-lg py-1 text-sm transition-colors">
                        è®°å½•å›å®¶
                    </button>
                </div>
            </div>
            
            <!-- æ—¶é•¿ç»Ÿè®¡ -->
            <div id="duration" class="bg-warm-50/50 rounded-xl p-4 mb-6 text-center text-gray-700">
                <p>ä»Šæ—¥åœ¨å¤–æ—¶é•¿: <span id="duration-text" class="font-semibold text-warm-700">æœªè®°å½•</span></p>
            </div>
            
            <!-- èŠ‚æ—¥/èŠ‚æ°”ç¥ç¦ -->
            <div id="festival" class="text-center text-lg text-warm-600 font-medium mb-6 py-2 border-y border-warm-100"></div>
            
            <!-- æ²»æ„ˆæ–‡æ¡ˆ -->
            <div id="message" class="text-center text-gray-600 bg-warm-50 rounded-xl p-4 italic leading-relaxed">
                æ¯å¤©ç»™è‡ªå·±ä¸€ä¸ªå¾®ç¬‘ï¼Œç”Ÿæ´»å°±ä¼šå¤šä¸€ä»½ç¾å¥½
            </div>
        </div>
        
        <!-- é¡µè„š -->
        <div class="text-center text-gray-500 text-sm bg-white/70 bg-blur rounded-lg p-3 fade-in" style="animation-delay: 0.3s">
            <p>æ„¿ä½ æ¯å¤©éƒ½æœ‰å¥½å¿ƒæƒ… ğŸŒ¸</p>
        </div>
    </div>

    <script>
        // æ¸©æš–é£æ ¼èƒŒæ™¯å›¾ - é€‚åˆåœ°å«ç”¨æˆ·çš„æ¸©é¦¨æ°›å›´
        const backgrounds = [
            'https://picsum.photos/id/1059/1200/800', // å‘æ—¥è‘µèŠ±ç”°
            'https://picsum.photos/id/1060/1200/800', // é˜³å…‰æµ·æ»©
            'https://picsum.photos/id/1063/1200/800', // å®é™æ¹–ç•”
            'https://picsum.photos/id/1066/1200/800', // ç”°å›­é£å…‰
            'https://picsum.photos/id/1076/1200/800', // é˜³å…‰èŠ±æŸ
            'https://picsum.photos/id/1080/1200/800', // é€†å…‰æ£®æ—
            'https://picsum.photos/id/1082/1200/800', // é˜³å…‰è‰åª
            'https://picsum.photos/id/110/1200/800',  // æ¸©é¦¨å®¤å†…
            'https://picsum.photos/id/240/1200/800',  // èˆ’é€‚æ²™å‘
            'https://picsum.photos/id/430/1200/800'   // æ¸©æš–å’–å•¡
        ];
        
        // æ²»æ„ˆç³»æ–‡æ¡ˆ - 30æ¡ä¸åŒçš„å¥½å¿ƒæƒ…è¯­å½•
        const messages = [
            "å›å®¶çš„é‚£ä¸€åˆ»ï¼Œæ‰€æœ‰ç–²æƒ«éƒ½çƒŸæ¶ˆäº‘æ•£äº†",
            "ä»Šå¤©ä¹Ÿè¾›è‹¦å•¦ï¼Œå¥½å¥½ä¼‘æ¯ä¸€ä¸‹å§",
            "å®¶æ˜¯æœ€æ¸©æš–çš„æ¸¯æ¹¾ï¼Œæ¬¢è¿å›æ¥",
            "æ”¾ä¸‹æ‰€æœ‰çƒ¦æ¼ï¼Œäº«å—æ­¤åˆ»çš„å®é™",
            "ä»Šå¤©çš„ä½ ä¹Ÿå¾ˆæ£’ï¼Œç»™è‡ªå·±ç‚¹ä¸ªèµ",
            "ç”Ÿæ´»å†å¿™ï¼Œä¹Ÿè¦è®°å¾—ç»™è‡ªå·±ç•™ç™½",
            "æ¯ä¸€ä¸ªå¹³å‡¡çš„æ—¥å­ï¼Œéƒ½å€¼å¾—æ¸©æŸ”ä»¥å¾…",
            "ç´¯äº†å°±æ­‡ä¸€æ­‡ï¼Œæ˜å¤©åˆæ˜¯æ–°çš„å¼€å§‹",
            "å®¶é‡Œçš„ç¯å…‰ï¼Œæ°¸è¿œä¸ºä½ äº®ç€",
            "å°å°çš„å¹¸ç¦ï¼Œè—åœ¨å›å®¶çš„æ¯ä¸€æ­¥é‡Œ",
            "ä»Šå¤©ä¹Ÿè¦ç»™è‡ªå·±ä¸€ä¸ªå¾®ç¬‘å‘€",
            "æ„¿ä½ è¢«ç”Ÿæ´»æ¸©æŸ”ä»¥å¾…ï¼Œæ¯ä¸€å¤©éƒ½å¼€å¿ƒ",
            "ç”Ÿæ´»æˆ–è®¸æœ‰ä¸æ˜“ï¼Œä½†æ€»æœ‰æ¸©æš–åœ¨ç­‰ä½ ",
            "è¿›é—¨å…ˆæ·±å‘¼å¸ï¼ŒæŠŠçƒ¦æ¼å…³åœ¨é—¨å¤–",
            "ä¸ç®¡ä»Šå¤©å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå®¶æ°¸è¿œæ˜¯ä½ çš„ä¾é ",
            "å¥½å¥½çˆ±è‡ªå·±ï¼Œä»äº«å—å›å®¶çš„æ—¶å…‰å¼€å§‹",
            "ä»Šå¤©çš„åŠªåŠ›ï¼Œéƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„ç”Ÿæ´»",
            "æ”¾æ…¢è„šæ­¥ï¼Œæ„Ÿå—ç”Ÿæ´»ä¸­çš„å°ç¡®å¹¸",
            "ä½ å€¼å¾—æ‰€æœ‰ç¾å¥½çš„äº‹ç‰©ï¼ŒåŒ…æ‹¬æ­¤åˆ»çš„å®é™",
            "å®¶ï¼Œæ˜¯æ— è®ºä½•æ—¶éƒ½ä¼šæ¥çº³ä½ çš„åœ°æ–¹",
            "ç»™è‡ªå·±å……å……ç”µï¼Œæ˜å¤©ç»§ç»­é—ªé—ªå‘å…‰",
            "ç”Ÿæ´»å†å¿™ï¼Œä¹Ÿè¦è®°å¾—æŠ¬å¤´çœ‹çœ‹æœˆäº®",
            "ä»Šå¤©çš„ä¸å¼€å¿ƒå°±åˆ°æ­¤ä¸ºæ­¢å§",
            "æ„¿ä½ æ¯å¤©éƒ½æœ‰æ–°çš„æœŸå¾…å’ŒæƒŠå–œ",
            "å›å®¶çš„æ„Ÿè§‰ï¼Œå°±æ˜¯è¿™ä¹ˆè¸å®åˆæ¸©æš–",
            "å†éš¾çš„æ—¥å­ï¼Œä¹Ÿæœ‰å€¼å¾—å¾®ç¬‘çš„ç¬é—´",
            "ä½ æ¯”è‡ªå·±æƒ³è±¡ä¸­æ›´å¼ºå¤§ï¼Œæ›´ä¼˜ç§€",
            "äº«å—è¿™ä»½å®é™ï¼Œæ˜å¤©åˆæ˜¯å…ƒæ°”æ»¡æ»¡çš„ä¸€å¤©",
            "å®¶çš„æ¸©åº¦ï¼Œå°±æ˜¯å¹¸ç¦çš„æ¸©åº¦",
            "ä»Šå¤©ä¹Ÿè°¢è°¢ä½ ï¼ŒåŠªåŠ›ç”Ÿæ´»çš„è‡ªå·±"
        ];
        
        // èŠ‚æ—¥ç¥ç¦
        const festivals = {
            "1-1": "å…ƒæ—¦å¿«ä¹ï¼Œæ–°çš„ä¸€å¹´ä¸‡äº‹é¡ºé‚",
            "2-14": "æƒ…äººèŠ‚å¿«ä¹ï¼Œæ„¿çˆ±ä¸è¢«çˆ±åŒæ—¶å‘ç”Ÿ",
            "3-8": "å¥³ç¥èŠ‚å¿«ä¹ï¼Œä½ å€¼å¾—ä¸–é—´æ‰€æœ‰ç¾å¥½",
            "4-5": "æ¸…æ˜å®‰åº·ï¼Œçæƒœå½“ä¸‹æ¯ä¸€åˆ»",
            "5-1": "åŠ³åŠ¨èŠ‚å¿«ä¹ï¼Œè¾›è‹¦å•¦ï¼Œå¥½å¥½ä¼‘æ¯",
            "6-1": "å„¿ç«¥èŠ‚å¿«ä¹ï¼Œæ„¿ä½ æ°¸è‘†ç«¥å¿ƒ",
            "6-22": "ç«¯åˆå®‰åº·ï¼Œæ„¿å¹³å®‰é¡ºé‚",
            "8-15": "ä¸­ç§‹å¿«ä¹ï¼Œé˜–å®¶å›¢åœ†",
            "10-1": "å›½åº†å¿«ä¹ï¼Œç¥ç¦ç¥–å›½ç¹è£æ˜Œç››",
            "9-10": "æ•™å¸ˆèŠ‚å¿«ä¹ï¼Œæ„Ÿæ©å¸ˆæ©",
            "12-25": "åœ£è¯å¿«ä¹ï¼Œæ„¿æ¸©æš–å¸¸ä¼´"
        };
        
        // å†œå†èŠ‚æ—¥
        const lunarFestivals = {
            "1-1": "æ˜¥èŠ‚å¿«ä¹ï¼Œé˜–å®¶å¹¸ç¦å®‰åº·",
            "1-15": "å…ƒå®µå¿«ä¹ï¼Œæœˆåœ†äººåœ†äº‹äº‹åœ†",
            "5-5": "ç«¯åˆå®‰åº·ï¼Œå¹³å®‰é¡ºé‚",
            "8-15": "ä¸­ç§‹å¿«ä¹ï¼ŒèŠ±å¥½æœˆåœ†äººå›¢åœ†",
            "9-9": "é‡é˜³å®‰åº·ï¼Œç¦å¯¿ç»µé•¿"
        };
        
        // èŠ‚æ°”
        const solarTerms = [
            { date: "2-4", name: "ç«‹æ˜¥", msg: "ç«‹æ˜¥å•¦ï¼Œä¸‡ç‰©å¤è‹ï¼Œå……æ»¡å¸Œæœ›" },
            { date: "2-19", name: "é›¨æ°´", msg: "é›¨æ°´è‡³ï¼Œæ˜¥é›¨æ¶¦ç‰©ï¼Œç”Ÿæœºç›ç„¶" },
            { date: "3-6", name: "æƒŠè›°", msg: "æƒŠè›°åˆ°ï¼Œæ˜¥é›·å§‹é¸£ï¼Œä¸‡ç‰©ç”Ÿé•¿" },
            { date: "3-21", name: "æ˜¥åˆ†", msg: "æ˜¥åˆ†è‡³ï¼Œæ˜¼å¤œå‡åˆ†ï¼Œæš–æ„æ¸æµ“" },
            { date: "4-5", name: "æ¸…æ˜", msg: "æ¸…æ˜æ—¶èŠ‚ï¼Œç¼…æ€€å…ˆäººï¼Œçæƒœå½“ä¸‹" },
            { date: "4-20", name: "è°·é›¨", msg: "è°·é›¨è‡³ï¼Œé›¨ç”Ÿç™¾è°·ï¼Œæ’­ç§å¸Œæœ›" },
            { date: "5-6", name: "ç«‹å¤", msg: "ç«‹å¤å•¦ï¼Œå¤æ—¥åˆè‡³ï¼Œä¸‡ç‰©ç¹èŒ‚" },
            { date: "5-21", name: "å°æ»¡", msg: "å°æ»¡åˆ°ï¼Œéº¦ç²’æ¸æ»¡ï¼Œæ”¶è·å¯æœŸ" },
            { date: "6-6", name: "èŠ’ç§", msg: "èŠ’ç§è‡³ï¼Œå¿™ç€è€•ç§ï¼Œä¸è´Ÿæ—¶å…‰" },
            { date: "6-21", name: "å¤è‡³", msg: "å¤è‡³åˆ°ï¼Œç™½æ˜¼æœ€é•¿ï¼Œæ„¿ä½ å‘é˜³è€Œç”Ÿ" },
            { date: "7-7", name: "å°æš‘", msg: "å°æš‘è‡³ï¼Œæ³¨æ„é˜²æš‘ï¼Œä¿æŒå¥½å¿ƒæƒ…" },
            { date: "7-23", name: "å¤§æš‘", msg: "å¤§æš‘åˆ°ï¼Œæ„¿ä½ æ¸…å‡‰ä¸€å¤ï¼Œå¹³å®‰åº¦æš‘" },
            { date: "8-8", name: "ç«‹ç§‹", msg: "ç«‹ç§‹å•¦ï¼Œç§‹æ„æ¸èµ·ï¼Œæš‘å»å‡‰æ¥" },
            { date: "8-23", name: "å¤„æš‘", msg: "å¤„æš‘è‡³ï¼Œæš‘æ°”æ¶ˆæ•£ï¼Œç§‹é«˜æ°”çˆ½" },
            { date: "9-8", name: "ç™½éœ²", msg: "ç™½éœ²åˆ°ï¼Œæ—©æ™šæ·»è¡£ï¼Œæ³¨æ„ä¿æš–" },
            { date: "9-23", name: "ç§‹åˆ†", msg: "ç§‹åˆ†è‡³ï¼Œæ˜¼å¤œå‡åˆ†ï¼Œæ”¶è·æ»¡æ»¡" },
            { date: "10-8", name: "å¯’éœ²", msg: "å¯’éœ²åˆ°ï¼Œå¯’æ„æ¸ç”Ÿï¼Œè®°å¾—æ·»è¡£" },
            { date: "10-24", name: "éœœé™", msg: "éœœé™è‡³ï¼Œæ„¿ä½ è¢«æ¸©æš–åŒ…å›´" },
            { date: "11-8", name: "ç«‹å†¬", msg: "ç«‹å†¬å•¦ï¼Œæ„¿ä½ æ¸©æš–è¿‡å†¬" },
            { date: "11-22", name: "å°é›ª", msg: "å°é›ªåˆ°ï¼Œæ³¨æ„ä¿æš–ï¼Œå¹³å®‰è¿‡å†¬" },
            { date: "12-7", name: "å¤§é›ª", msg: "å¤§é›ªè‡³ï¼Œæ„¿ä½ å¿ƒä¸­æœ‰æš–é˜³" },
            { date: "12-22", name: "å†¬è‡³", msg: "å†¬è‡³åˆ°ï¼Œç™½æ˜¼æ¸é•¿ï¼Œæš–æ„æ¸ç”Ÿ" }
        ];
        
        // å†œå†è½¬æ¢å·¥å…·
        class Lunar {
            static getLunarDate(date) {
                // ç®€åŒ–ç‰ˆå†œå†è½¬æ¢ï¼Œå®é™…é¡¹ç›®ä¸­å¯ä½¿ç”¨æ›´ç²¾ç¡®çš„ç®—æ³•
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                
                // è¿™é‡Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…åº”ç”¨ä¸­åº”æ›¿æ¢ä¸ºç²¾ç¡®çš„å†œå†è½¬æ¢
                const lunarMonths = ["æ­£", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹", "å", "å†¬", "è…Š"];
                const lunarDays = ["ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹", "å", 
                                  "åä¸€", "åäºŒ", "åä¸‰", "åå››", "åäº”", "åå…­", "åä¸ƒ", "åå…«", "åä¹", 
                                  "äºŒå", "å»¿ä¸€", "å»¿äºŒ", "å»¿ä¸‰", "å»¿å››", "å»¿äº”", "å»¿å…­", "å»¿ä¸ƒ", "å»¿å…«", "å»¿ä¹", "ä¸‰å"];
                
                // ç®€å•æ¨¡æ‹Ÿï¼Œå®é™…åº”ç”¨éœ€ä½¿ç”¨ç²¾ç¡®ç®—æ³•
                return {
                    month: Math.floor(Math.random() * 12) + 1,
                    day: Math.floor(Math.random() * 29) + 1,
                    monthName: lunarMonths[Math.floor(Math.random() * 12)],
                    dayName: lunarDays[Math.floor(Math.random() * 29)]
                };
            }
        }
        
        // è®°å½•å‡ºé—¨æ—¶é—´
        function recordLeaveTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('leave-time').textContent = timeStr;
            
            // å­˜å‚¨åˆ°æœ¬åœ°
            localStorage.setItem('leaveTime', now.getTime());
            localStorage.setItem('leaveTimeStr', timeStr);
            
            // æ›´æ–°æ—¶é•¿
            updateDuration();
            
            // æ˜¾ç¤ºæç¤º
            showToast('å‡ºé—¨æ—¶é—´å·²è®°å½•');
        }
        
        // è®°å½•å›å®¶æ—¶é—´
        function recordReturnTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('return-time').textContent = timeStr;
            
            // å­˜å‚¨åˆ°æœ¬åœ°
            localStorage.setItem('returnTime', now.getTime());
            localStorage.setItem('returnTimeStr', timeStr);
            
            // æ›´æ–°æ—¶é•¿
            updateDuration();
            
            // æ˜¾ç¤ºæç¤º
            showToast('æ¬¢è¿å›å®¶ï½');
        }
        
        // æ›´æ–°åœ¨å¤–æ—¶é•¿
        function updateDuration() {
            const leaveTime = localStorage.getItem('leaveTime');
            const returnTime = localStorage.getItem('returnTime');
            
            if (leaveTime && returnTime) {
                const durationMs = parseInt(returnTime) - parseInt(leaveTime);
                const hours = Math.floor(durationMs / (1000 * 60 * 60));
                const minutes = Math.floor((durationMs % (1000 * 60 * 60)) / (1000 * 60));
                
                document.getElementById('duration-text').textContent = 
                    `${hours}å°æ—¶${minutes}åˆ†é’Ÿ`;
            } else if (leaveTime) {
                document.getElementById('duration-text').textContent = 'å°šæœªå›å®¶';
            }
        }
        
        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message) {
            // åˆ›å»ºtoastå…ƒç´ 
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-warm-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 fade-in';
            toast.textContent = message;
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(toast);
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transition = 'opacity 0.5s ease';
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }
        
        // è·å–æ—¶é—´æ®µé—®å€™è¯­
        function getGreeting() {
            const hour = new Date().getHours();
            
            if (hour >= 6 && hour < 12) {
                return "ä»Šå¤©ä¹Ÿè¦å¼€å¿ƒå“¦ï¼";
            } else if (hour >= 12 && hour < 18) {
                return "ä¸‹åˆå¥½ï¼ŒåŠ æ²¹å‘€ï¼";
            } else {
                return "æ¬¢è¿å›å®¶ï¼Œå¥½å¥½ä¼‘æ¯ï½";
            }
        }
        
        // æ£€æŸ¥èŠ‚æ—¥
        function checkFestival() {
            const now = new Date();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            const dateStr = `${month}-${day}`;
            
            // æ£€æŸ¥å…¬å†èŠ‚æ—¥
            if (festivals[dateStr]) {
                return festivals[dateStr];
            }
            
            // æ£€æŸ¥èŠ‚æ°”
            for (const term of solarTerms) {
                if (term.date === dateStr) {
                    return term.msg;
                }
            }
            
            // æ£€æŸ¥å†œå†èŠ‚æ—¥ï¼ˆç®€åŒ–ç‰ˆï¼‰
            const lunar = Lunar.getLunarDate(now);
            const lunarDateStr = `${lunar.month}-${lunar.day}`;
            if (lunarFestivals[lunarDateStr]) {
                return lunarFestivals[lunarDateStr];
            }
            
            // å¹³æ—¥é—®å€™
            const weekday = now.getDay();
            const weekdays = ["å‘¨æ—¥", "å‘¨ä¸€", "å‘¨äºŒ", "å‘¨ä¸‰", "å‘¨å››", "å‘¨äº”", "å‘¨å…­"];
            return `ä»Šå¤©æ˜¯${weekdays[weekday]}ï¼Œæ„¿ä½ å¿ƒæƒ…æ„‰æ‚¦`;
        }
        
        // æ›´æ–°æ—¶é—´æ˜¾ç¤º
        function updateTime() {
            const now = new Date();
            
            // æ›´æ–°æ—¥æœŸ
            const dateOptions = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
            document.getElementById('date').textContent = now.toLocaleDateString('zh-CN', dateOptions);
            
            // æ›´æ–°æ—¶é—´
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById('time').textContent = now.toLocaleTimeString('zh-CN', timeOptions);
            
            // æ›´æ–°é—®å€™è¯­ï¼ˆæ¯å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼‰
            if (now.getMinutes() === 0 && now.getSeconds() === 0) {
                document.getElementById('greeting').textContent = getGreeting();
            }
        }
        
        // åˆå§‹åŒ–é¡µé¢
        function init() {
            // è®¾ç½®éšæœºèƒŒæ™¯
            const randomBg = backgrounds[Math.floor(Math.random() * backgrounds.length)];
            document.body.style.backgroundImage = `url(${randomBg})`;
            
            // è®¾ç½®éšæœºæ²»æ„ˆæ–‡æ¡ˆ
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            document.getElementById('message').textContent = randomMsg;
            
            // è®¾ç½®é—®å€™è¯­
            document.getElementById('greeting').textContent = getGreeting();
            
            // è®¾ç½®èŠ‚æ—¥ç¥ç¦
            document.getElementById('festival').textContent = checkFestival();
            
            // åŠ è½½ä¿å­˜çš„æ—¶é—´è®°å½•
            const leaveTimeStr = localStorage.getItem('leaveTimeStr');
            const returnTimeStr = localStorage.getItem('returnTimeStr');
            
            if (leaveTimeStr) {
                document.getElementById('leave-time').textContent = leaveTimeStr;
            }
            
            if (returnTimeStr) {
                document.getElementById('return-time').textContent = returnTimeStr;
            }
            
            // æ›´æ–°æ—¶é•¿
            updateDuration();
            
            // åˆå§‹åŒ–æ—¶é—´æ˜¾ç¤º
            updateTime();
            setInterval(updateTime, 1000);
            
            // æ¯å¤©å‡Œæ™¨æ¸…é™¤å½“å¤©è®°å½•
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(now.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            const timeToMidnight = tomorrow - now;
            
            setTimeout(() => {
                localStorage.removeItem('leaveTime');
                localStorage.removeItem('leaveTimeStr');
                localStorage.removeItem('returnTime');
                localStorage.removeItem('returnTimeStr');
                
                document.getElementById('leave-time').textContent = 'æœªè®°å½•';
                document.getElementById('return-time').textContent = 'æœªè®°å½•';
                document.getElementById('duration-text').textContent = 'æœªè®°å½•';
                
                // åˆ·æ–°é¡µé¢å†…å®¹
                init();
            }, timeToMidnight);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>
